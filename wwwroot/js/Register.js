$(document).ready(function () {    // JavaScript to preview image    document.getElementById('ProfileImage').addEventListener('change', function (e) {        var file = e.target.files[0];        if (file) {            var reader = new FileReader();            reader.onload = function (event) {                var imagePreview = document.getElementById('imagePreview');                imagePreview.src = event.target.result;                imagePreview.style.display = 'block';            };            reader.readAsDataURL(file);        }    });    const phoneInputField = document.querySelector("#PhoneNumber");    phoneInput = window.intlTelInput(phoneInputField, {        initialCountry: "auto", // Set initial country (auto or a specific code like "us")        geoIpLookup: function (callback) {            fetch('https://ipapi.co/json', { mode: 'no-cors' })                .then((response) => response.json())                .then((data) => callback(data.country_code))                .catch(() => callback("us"));        },        utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"    });    $('#roleEmployee').on('change', function () {        console.log("emp");        $('#AdminRef').removeClass('visually-hidden');    });    $('#roleAdmin').on('change', function () {        $('#AdminRef').addClass('visually-hidden');    });    $("#SignUpForm").validate({        rules: {            Username: {                required: true,                minlength: 3,                maxlength: 20            },            FirstName: {                required: true,                lettersOnly: true, // Custom method for letters only                maxlength: 20            },            LastName: {                lettersOnly: true // Custom method for letters only            },            Email: {                required: true,                email: true            },            PasswordHash: {                required: true,                minlength: 8            },            PhoneNumber: {                required: true,                digits: true,                minlength: 6,                maxlength: 15            },            Role: {                required: true            },            DateOfBirth: {                required: true,            },            Designation: {                required: true            },            AdminRef: {                required: function () {                    return $("#Role").val() === "Employee";                }            }        },        messages: {            Username: {                required: "Please enter a username.",                minlength: "Username must be at least 3 characters.",                maxlength: "Username cannot exceed 15 characters."            },            FirstName: {                required: "Please enter your first name."            },            LastName: {            },            Email: {                required: "Please enter your email.",                email: "Please enter a valid email address."            },            PasswordHash: {                required: "Please enter a password.",                minlength: "Password must be at least 8 characters."            },            PhoneNumber: {                required: "Please enter your phone number.",                digits: "Please enter only numbers.",                minlength: "Phone number must be at least 6 digits.",                maxlength: "Phone number cannot exceed 15 digits."            },            Role: {                required: "Please select a role."            },            DateOfBirth: {                required: "Please enter your date of birth.",            },            Designation: {                required: "Please enter your designation."            },            AdminRef: {                required: "Admin Reference is required for Employee role."            }        },                submitHandler: function (form, event) {            event.preventDefault()            // Collect form data            //const formData = {            //    Username: $('#Username').val(),            //    FirstName: $('#FirstName').val(),            //    LastName: $('#LastName').val(),            //    Email: $('#Email').val(),            //    PasswordHash: $('#PasswordHash').val(),            //    PhoneNumber: $('#PhoneNumber').val(),            //    Role: $('#Role').val(),            //    DateOfBirth: $('#DateOfBirth').val(),            //    Designation: $('#Designation').val(),            //    AdminRef: $('#AdminRef').val()            //};            const formData = new FormData(form);            const formattedPhoneNumber = phoneInput.getNumber(intlTelInputUtils.numberFormat.E164); // E.164 format            console.log("Formatted Phone Number:", formattedPhoneNumber); // Debug output            formData.set("PhoneNumber", formattedPhoneNumber);             // AJAX submission            $.ajax({                url: '/Home/Register',                type: 'POST',                processData: false,                contentType: false,                data: formData,                success: function (result) {                    alert(result.message);                    if (result.success) {                        window.location.href = '/Home/Index';                    }                },                error: function () {                    alert('An error occurred while registering the user.');                }            });        }    });    // Custom method for letters only    $.validator.addMethod("lettersOnly", function (value, element) {        return this.optional(element) || /^[a-zA-Z]+$/.test(value);    }, "Please enter only letters.");    // Custom validation method for file extension    $.validator.addMethod("extension", function (value, element, param) {        return this.optional(element) || param.split("|").some(ext => value.endsWith(`.${ext}`));    }, "Please upload a valid image file (jpg, jpeg, png).");});